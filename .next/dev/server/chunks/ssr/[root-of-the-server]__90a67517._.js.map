{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jesse/Documents/cartfax_complete_v2/components/GlobeStates.tsx"],"sourcesContent":["// components/GlobeStates.tsx\nimport React, {\n  useEffect,\n  useRef,\n  useState,\n  useMemo,\n} from 'react';\nimport Globe from 'react-globe.gl';\nimport * as topojson from 'topojson-client';\nimport * as THREE from 'three';\n\nexport type RegionId = 'unitedStates' | 'canada' | 'mexico' | 'netherlands';\n\nexport type SelectionLevel = 'country' | 'subregion';\n\nexport interface GlobeSelection {\n  region: RegionId;\n  level: SelectionLevel;\n  id: string;\n  name: string;\n}\n\ninterface GlobeStatesProps {\n  region: RegionId;\n  onRegionChange?: (region: RegionId) => void;\n  onSelectionChange?: (selection: GlobeSelection | null) => void;\n  onAltitudeChange?: (altitude: number) => void;\n}\n\n// === Configuration ==========================================================\n\nconst GLOBE_TEXTURE_URL = '/textures/earth-nasa-base.jpg';\n// ^^^ Rename your NASA texture to this, or change this constant to match\n// whatever filename you used.\n\nconst US_STATES_URL = 'https://unpkg.com/us-atlas@3/states-10m.json';\nconst WORLD_COUNTRIES_URL =\n  'https://unpkg.com/world-atlas@2/countries-110m.json';\n\n// World-atlas numeric IDs → our RegionId\nconst COUNTRY_ID_TO_REGION: Record<number, RegionId> = {\n  840: 'unitedStates', // USA\n  124: 'canada',\n  484: 'mexico',\n  528: 'netherlands',\n};\n\nconst REGION_FOCUS: Record<RegionId, { lat: number; lng: number; altitude: number }> = {\n  unitedStates: { lat: 39, lng: -98, altitude: 1.55 },\n  canada: { lat: 60, lng: -95, altitude: 1.7 },\n  mexico: { lat: 23, lng: -102, altitude: 1.7 },\n  netherlands: { lat: 52.3, lng: 5.3, altitude: 2.3 },\n};\n\nconst BASE_ALT_COUNTRY = 0.006;\nconst BASE_ALT_STATE = 0.02;\nconst EXTRA_SELECTED = 0.01;\nconst EXTRA_HOVER = 0.004;\n\n// === Helpers ===============================================================\n\nconst isUsState = (poly: any) =>\n  poly?.properties?.layer === 'us-state';\n\nconst getStatePostal = (poly: any): string | null => {\n  const postal = poly?.properties?.postal ?? poly?.id;\n  if (!postal) return null;\n  return String(postal).toUpperCase();\n};\n\nconst getCountryRegionFromPoly = (poly: any): RegionId | null => {\n  const idRaw = poly?.id;\n  if (idRaw == null) return null;\n  const idNum = typeof idRaw === 'number'\n    ? idRaw\n    : Number.parseInt(String(idRaw), 10);\n  if (Number.isNaN(idNum)) return null;\n  return COUNTRY_ID_TO_REGION[idNum] ?? null;\n};\n\n// === Component =============================================================\n\nconst GlobeStates: React.FC<GlobeStatesProps> = ({\n  region,\n  onRegionChange,\n  onSelectionChange,\n  onAltitudeChange,\n}) => {\n  const globeRef = useRef<any>(null);\n\n  const [worldPolygons, setWorldPolygons] = useState<any[]>([]);\n  const [usStatePolygons, setUsStatePolygons] = useState<any[]>([]);\n\n  const [hoverPoly, setHoverPoly] = useState<any | null>(null);\n  const [selected, setSelected] = useState<GlobeSelection | null>(null);\n\n  // --- Load world countries -------------------------------------------------\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await fetch(WORLD_COUNTRIES_URL);\n        const topo = await res.json();\n        const geo = topojson.feature(topo, topo.objects.countries) as any;\n        const features = geo.features.map((f: any) => ({\n          ...f,\n          properties: {\n            ...f.properties,\n            layer: 'country',\n          },\n        }));\n        setWorldPolygons(features);\n      } catch (err) {\n        console.error('Error loading world countries topojson', err);\n      }\n    })();\n  }, []);\n\n  // --- Load US states -------------------------------------------------------\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await fetch(US_STATES_URL);\n        const topo = await res.json();\n        const geo = topojson.feature(topo, topo.objects.states) as any;\n        const states = geo.features.map((f: any) => ({\n          ...f,\n          properties: {\n            ...f.properties,\n            layer: 'us-state',\n            postal: f.properties?.postal || f.id,\n          },\n        }));\n        setUsStatePolygons(states);\n      } catch (err) {\n        console.error('Error loading US states topojson', err);\n      }\n    })();\n  }, []);\n\n  // --- Camera focus when region changes ------------------------------------\n  useEffect(() => {\n    if (!globeRef.current) return;\n    const focus = REGION_FOCUS[region];\n\n    globeRef.current.pointOfView(\n      {\n        lat: focus.lat,\n        lng: focus.lng,\n        altitude: focus.altitude,\n      },\n      1000\n    );\n  }, [region, worldPolygons.length, usStatePolygons.length]);\n\n  // --- Report zoom / altitude back up --------------------------------------\n  useEffect(() => {\n    if (!globeRef.current || !onAltitudeChange) return;\n\n    const globe = globeRef.current;\n    const controls = globe.controls();\n\n    const handleChange = () => {\n      const { altitude } = globe.pointOfView() || {};\n      if (typeof altitude === 'number') {\n        onAltitudeChange(altitude);\n      }\n    };\n\n    controls.addEventListener('change', handleChange);\n    return () => {\n      controls.removeEventListener('change', handleChange);\n    };\n  }, [onAltitudeChange]);\n\n  // --- Combined polygon set -------------------------------------------------\n\n  const polygonsData = useMemo(() => {\n    if (!worldPolygons.length) return [];\n\n    // Always render all countries so the whole Earth has outlines.\n    // Only render US states when we’re in the US view.\n    if (region === 'unitedStates') {\n      return [...worldPolygons, ...usStatePolygons];\n    }\n    return worldPolygons;\n  }, [worldPolygons, usStatePolygons, region]);\n\n  // --- Altitude / explosion logic ------------------------------------------\n\n  const polygonAltitude = (poly: any) => {\n    const usState = isUsState(poly);\n    const polyRegion = getCountryRegionFromPoly(poly);\n\n    // Hide US states when not in US mode\n    if (usState && region !== 'unitedStates') {\n      return 0;\n    }\n\n    // US states\n    if (usState) {\n      const id = getStatePostal(poly) ?? '';\n      const isSelected =\n        selected?.region === 'unitedStates' &&\n        selected.level === 'subregion' &&\n        selected.id === id;\n      const isHovered = hoverPoly === poly;\n\n      let alt = BASE_ALT_STATE;\n      if (isSelected) alt += EXTRA_SELECTED;\n      if (isHovered) alt += EXTRA_HOVER;\n      return alt;\n    }\n\n    // Countries\n    let alt = BASE_ALT_COUNTRY;\n\n    if (polyRegion) {\n      const isActiveRegion = polyRegion === region;\n      const isSelectedCountry =\n        selected?.level === 'country' &&\n        selected.region === polyRegion;\n      const isHovered = hoverPoly === poly;\n\n      if (isActiveRegion) {\n        alt += 0.012;\n      }\n      if (isSelectedCountry) {\n        alt += 0.006;\n      }\n      if (isHovered) {\n        alt += 0.003;\n      }\n\n      // When we’re in US mode, keep the US country itself almost flat\n      // so the state tiles visually dominate.\n      if (polyRegion === 'unitedStates' && region === 'unitedStates') {\n        alt = 0.001;\n      }\n    }\n\n    return alt;\n  };\n\n  // --- Materials ------------------------------------------------------------\n\n  const polygonCapMaterial = (poly: any) => {\n    const usState = isUsState(poly);\n    const polyRegion = getCountryRegionFromPoly(poly);\n    const isHovered = hoverPoly === poly;\n\n    // If this is a US state and we’re not in US view, make it invisible\n    if (usState && region !== 'unitedStates') {\n      return new THREE.MeshStandardMaterial({\n        visible: false,\n      });\n    }\n\n    if (usState) {\n      const id = getStatePostal(poly) ?? '';\n      const isSelected =\n        selected?.region === 'unitedStates' &&\n        selected.level === 'subregion' &&\n        selected.id === id;\n\n      const baseColor = new THREE.Color('#020617');\n      const highlight = new THREE.Color('#22c55e');\n\n      const active = isSelected || isHovered;\n      const color = active ? highlight : baseColor;\n\n      return new THREE.MeshStandardMaterial({\n        color,\n        metalness: 0.75,\n        roughness: 0.3,\n        emissive: color,\n        emissiveIntensity: isSelected ? 0.7 : isHovered ? 0.45 : 0.25,\n      });\n    }\n\n    // Countries\n    const isActiveRegion = polyRegion && polyRegion === region;\n    const isSelectedCountry =\n      selected?.level === 'country' &&\n      polyRegion &&\n      selected.region === polyRegion;\n\n    const baseColor = new THREE.Color('#020617');\n    const activeColor = new THREE.Color('#0f766e');\n    const emissiveBase = new THREE.Color('#020617');\n    const emissiveActive = new THREE.Color('#22c55e');\n\n    const color = isActiveRegion ? activeColor : baseColor;\n    const emissive = isActiveRegion ? emissiveActive : emissiveBase;\n\n    const emissiveIntensity = isActiveRegion\n      ? isSelectedCountry\n        ? 0.7\n        : 0.45\n      : 0.18;\n\n    return new THREE.MeshStandardMaterial({\n      color,\n      metalness: 0.45,\n      roughness: 0.7,\n      emissive,\n      emissiveIntensity,\n      transparent: true,\n      opacity: isActiveRegion ? 0.96 : 0.8,\n    });\n  };\n\n  const polygonSideColor = (poly: any) => {\n    if (isUsState(poly)) {\n      return 'rgba(34,197,94,0.9)'; // bright emerald seams for state tiles\n    }\n    const polyRegion = getCountryRegionFromPoly(poly);\n    if (polyRegion && polyRegion === region) {\n      return 'rgba(45,212,191,0.8)'; // teal rim for active country\n    }\n    return 'rgba(15,23,42,0.85)'; // dark slate for everything else\n  };\n\n  const polygonStrokeColor = (poly: any) => {\n    if (isUsState(poly)) {\n      return 'rgba(22,163,74,0.7)';\n    }\n    const polyRegion = getCountryRegionFromPoly(poly);\n    if (polyRegion && polyRegion === region) {\n      return 'rgba(34,211,238,0.7)';\n    }\n    return 'rgba(30,64,175,0.25)';\n  };\n\n  const polygonLabel = (poly: any) => {\n    if (isUsState(poly)) {\n      const postal = poly.properties?.postal ?? '';\n      const name = poly.properties?.name ?? postal ?? '';\n      return `${name} (${postal})`;\n    }\n    return poly.properties?.name ?? '';\n  };\n\n  // --- Click / hover handlers ----------------------------------------------\n\n  const handlePolygonClick = (poly: any) => {\n    if (!poly) return;\n\n    const usState = isUsState(poly);\n    const polyRegion = getCountryRegionFromPoly(poly);\n\n    // Clicking a US state while in US view → select that state\n    if (usState && region === 'unitedStates') {\n      const id = getStatePostal(poly) ?? '';\n      const name = poly.properties?.name ?? id;\n\n      const nextSel: GlobeSelection = {\n        region: 'unitedStates',\n        level: 'subregion',\n        id,\n        name,\n      };\n\n      setSelected(nextSel);\n      onSelectionChange?.(nextSel);\n      return;\n    }\n\n    // Clicking a country → switch region (if it’s one of our four) and/or\n    // select that jurisdiction tile.\n    if (polyRegion) {\n      const name = poly.properties?.name ?? polyRegion;\n\n      if (polyRegion !== region) {\n        onRegionChange?.(polyRegion);\n      }\n\n      const nextSel: GlobeSelection = {\n        region: polyRegion,\n        level: 'country',\n        id: polyRegion,\n        name,\n      };\n\n      setSelected(nextSel);\n      onSelectionChange?.(nextSel);\n    }\n  };\n\n  // === Render ===============================================================\n\n  return (\n    <div className=\"h-full w-full\">\n      <Globe\n        ref={globeRef}\n        backgroundColor=\"rgba(0,0,0,1)\"\n        showAtmosphere\n        atmosphereColor=\"rgba(56,189,248,0.85)\"\n        atmosphereAltitude={0.18}\n        globeImageUrl={GLOBE_TEXTURE_URL}\n        polygonsData={polygonsData}\n        polygonAltitude={polygonAltitude}\n        polygonCapMaterial={polygonCapMaterial}\n        polygonSideColor={polygonSideColor}\n        polygonStrokeColor={polygonStrokeColor}\n        polygonLabel={polygonLabel}\n        polygonsTransitionDuration={280}\n        onPolygonHover={setHoverPoly}\n        onPolygonClick={handlePolygonClick}\n      />\n    </div>\n  );\n};\n\nexport default GlobeStates;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jesse/Documents/cartfax_complete_v2/components/AdminStateExplorer.tsx"],"sourcesContent":["// components/AdminStateExplorer.tsx\r\n\r\nimport { useState } from \"react\";\r\n// FIX: Removed useGlobeStore import\r\nimport GlobeStates from \"./GlobeStates\";\r\nimport { JURISDICTIONS, DEFAULT_JURISDICTION } from \"../lib/jurisdictions\";\r\n\r\n// Helper component for the selector menu\r\nconst JurisdictionSelector = ({\r\n  selectedRegion,\r\n  setSelectedRegion,\r\n}: {\r\n  selectedRegion: string;\r\n  setSelectedRegion: (region: string) => void;\r\n}) => (\r\n  <div className=\"flex justify-center p-4 bg-slate-800 rounded-lg shadow-xl z-20 relative\">\r\n    <select\r\n      className=\"block w-full max-w-sm rounded-md border-0 py-1.5 pl-3 pr-10 text-slate-100 bg-slate-700 ring-1 ring-inset ring-slate-600 focus:ring-2 focus:ring-emerald-500 sm:text-sm sm:leading-6\"\r\n      value={selectedRegion}\r\n      onChange={(e) => setSelectedRegion(e.target.value)}\r\n    >\r\n      <option value=\"ALL\">All Regions</option>\r\n      <option value=\"north_america\">North America</option>\r\n      <option value=\"europe\">Europe</option>\r\n    </select>\r\n  </div>\r\n);\r\n\r\nexport default function AdminStateExplorer() {\r\n  // FIX: State is now managed here instead of a missing external store\r\n  const [selectedStateId, setSelectedStateId] = useState<string | null>(null);\r\n  \r\n  // Default to North America to show more than just the US initially if desired, \r\n  // or use DEFAULT_JURISDICTION.region\r\n  const [selectedRegion, setSelectedRegion] = useState<string>(\"north_america\");\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen overflow-hidden bg-slate-900\">\r\n      \r\n      <div className=\"flex-shrink-0 z-20\">\r\n        <JurisdictionSelector\r\n          selectedRegion={selectedRegion}\r\n          setSelectedRegion={setSelectedRegion}\r\n        />\r\n      </div>\r\n\r\n      <main className=\"flex-1 flex min-h-0 relative p-4\">\r\n        <div className=\"relative h-full w-full mx-auto max-w-7xl\">\r\n          {/* FIX: Passing state down as props */}\r\n          <GlobeStates \r\n            region={selectedRegion} \r\n            selectedStateId={selectedStateId} \r\n            onStateSelect={setSelectedStateId}\r\n          />\r\n          \r\n          <div className=\"pointer-events-none absolute inset-0 rounded-lg shadow-[0_0_150px_100px_rgba(2,_6,_23,_1)] [transform:translateZ(-100px)]\"></div>\r\n          \r\n          {selectedStateId && (\r\n            <div className=\"absolute top-4 right-4 z-10 p-4 bg-slate-800/90 backdrop-blur text-white rounded-lg shadow-xl border border-slate-700\">\r\n              <p className=\"font-semibold text-xs uppercase tracking-wider text-slate-400\">Selected Jurisdiction</p>\r\n              <p className=\"text-xl font-bold text-emerald-400 mt-1\">{selectedStateId}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      <footer className=\"flex-shrink-0 p-2 text-center text-xs text-slate-500 bg-slate-900 border-t border-slate-800 z-20\">\r\n        Cartfax Admin Explorer - Viewing {selectedRegion === 'ALL' ? 'Global' : selectedRegion} Region\r\n      </footer>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,oCAAoC;;;;;;AAEpC;AACA,oCAAoC;AACpC;;;;;;;;AAGA,yCAAyC;AACzC,MAAM,uBAAuB,CAAC,EAC5B,cAAc,EACd,iBAAiB,EAIlB,iBACC,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YACC,WAAU;YACV,OAAO;YACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;;8BAEjD,qKAAC;oBAAO,OAAM;8BAAM;;;;;;8BACpB,qKAAC;oBAAO,OAAM;8BAAgB;;;;;;8BAC9B,qKAAC;oBAAO,OAAM;8BAAS;;;;;;;;;;;;;;;;;AAKd,SAAS;IACtB,qEAAqE;IACrE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+GAAQ,EAAgB;IAEtE,gFAAgF;IAChF,qCAAqC;IACrC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,+GAAQ,EAAS;IAE7D,qBACE,qKAAC;QAAI,WAAU;;0BAEb,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC;oBACC,gBAAgB;oBAChB,mBAAmB;;;;;;;;;;;0BAIvB,qKAAC;gBAAK,WAAU;0BACd,cAAA,qKAAC;oBAAI,WAAU;;sCAEb,qKAAC,8HAAW;4BACV,QAAQ;4BACR,iBAAiB;4BACjB,eAAe;;;;;;sCAGjB,qKAAC;4BAAI,WAAU;;;;;;wBAEd,iCACC,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;oCAAE,WAAU;8CAAgE;;;;;;8CAC7E,qKAAC;oCAAE,WAAU;8CAA2C;;;;;;;;;;;;;;;;;;;;;;;0BAMhE,qKAAC;gBAAO,WAAU;;oBAAmG;oBACjF,mBAAmB,QAAQ,WAAW;oBAAe;;;;;;;;;;;;;AAI/F"}},
    {"offset": {"line": 555, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jesse/Documents/cartfax_complete_v2/components/UnAuthenticatedLanding.tsx"],"sourcesContent":["import React from 'react';\r\nimport { signIn } from 'next-auth/react';\r\n\r\nexport default function UnAuthenticatedLanding() {\r\n  return (\r\n    <div className=\"flex min-h-screen flex-col items-center justify-center bg-slate-950 text-white relative overflow-hidden\">\r\n      {/* Background decoration */}\r\n      <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden z-0 opacity-20 pointer-events-none\">\r\n        <div className=\"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-emerald-500/20 rounded-full blur-[100px]\" />\r\n        <div className=\"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-sky-500/20 rounded-full blur-[100px]\" />\r\n      </div>\r\n\r\n      <div className=\"z-10 text-center px-6 max-w-4xl\">\r\n        <h1 className=\"text-5xl md:text-7xl font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-sky-400\">\r\n          Cartfax\r\n        </h1>\r\n        <p className=\"mt-6 text-xl md:text-2xl text-slate-300 font-light\">\r\n          The Independent Dispensary & Batch Database\r\n        </p>\r\n        <p className=\"mt-4 text-sm text-slate-500 max-w-lg mx-auto\">\r\n          Modeled for transparency, not commerce. Access independent testing results, \r\n          live jurisdictional tracking, and verified community reviews.\r\n        </p>\r\n        \r\n        <div className=\"mt-10\">\r\n          <button\r\n            onClick={() => signIn()}\r\n            className=\"group relative inline-flex items-center justify-center rounded-full bg-slate-800 px-8 py-3 text-sm font-semibold text-white transition-all hover:bg-slate-700 hover:ring-2 hover:ring-emerald-500/50\"\r\n          >\r\n            <span className=\"mr-2\">Enter Atlas</span>\r\n            <svg className=\"h-4 w-4 transition-transform group-hover:translate-x-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mt-16 grid grid-cols-1 gap-8 sm:grid-cols-3 border-t border-slate-800/50 pt-8\">\r\n          <div className=\"flex flex-col items-center\">\r\n            <span className=\"text-3xl font-bold text-white mb-1\">4+</span>\r\n            <span className=\"text-xs uppercase tracking-widest text-slate-500\">Jurisdictions</span>\r\n          </div>\r\n          <div className=\"flex flex-col items-center\">\r\n            <span className=\"text-3xl font-bold text-white mb-1\">Live</span>\r\n            <span className=\"text-xs uppercase tracking-widest text-slate-500\">Batch Tracking</span>\r\n          </div>\r\n          <div className=\"flex flex-col items-center\">\r\n            <span className=\"text-3xl font-bold text-white mb-1\">100%</span>\r\n            <span className=\"text-xs uppercase tracking-widest text-slate-500\">Independent</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;;;AAEe,SAAS;IACtB,qBACE,qKAAC;QAAI,WAAU;;0BAEb,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAI,WAAU;;;;;;kCACf,qKAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGjB,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAG,WAAU;kCAA2H;;;;;;kCAGzI,qKAAC;wBAAE,WAAU;kCAAqD;;;;;;kCAGlE,qKAAC;wBAAE,WAAU;kCAA+C;;;;;;kCAK5D,qKAAC;wBAAI,WAAU;kCACb,cAAA,qKAAC;4BACC,SAAS,IAAM,IAAA,6IAAM;4BACrB,WAAU;;8CAEV,qKAAC;oCAAK,WAAU;8CAAO;;;;;;8CACvB,qKAAC;oCAAI,WAAU;oCAAyD,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CAC7G,cAAA,qKAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;kCAK3E,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAK,WAAU;kDAAqC;;;;;;kDACrD,qKAAC;wCAAK,WAAU;kDAAmD;;;;;;;;;;;;0CAErE,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAK,WAAU;kDAAqC;;;;;;kDACrD,qKAAC;wCAAK,WAAU;kDAAmD;;;;;;;;;;;;0CAErE,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAK,WAAU;kDAAqC;;;;;;kDACrD,qKAAC;wCAAK,WAAU;kDAAmD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM/E"}},
    {"offset": {"line": 765, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jesse/Documents/cartfax_complete_v2/pages/index.tsx"],"sourcesContent":["// pages/index.tsx\n\nimport { useSession } from 'next-auth/react';\n// Corrected import path. Assuming AdminStateExplorer is in components/AdminStateExplorer.tsx\nimport AdminStateExplorer from '../components/AdminStateExplorer'; \nimport UnAuthenticatedLanding from '../components/UnAuthenticatedLanding'; \n\nexport default function Home() {\n  const { data: session } = useSession();\n\n  // If the user is authenticated, show the Admin State Explorer.\n  if (session) {\n    return <AdminStateExplorer />;\n  }\n\n  // Otherwise, show the unauthenticated landing page.\n  return <UnAuthenticatedLanding />;\n}"],"names":[],"mappings":"AAAA,kBAAkB;;;;;;AAElB;AACA,6FAA6F;AAC7F;AACA;;;;;;;;;AAEe,SAAS;IACtB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,iJAAU;IAEpC,+DAA+D;IAC/D,IAAI,SAAS;QACX,qBAAO,qKAAC,qIAAkB;;;;;IAC5B;IAEA,oDAAoD;IACpD,qBAAO,qKAAC,yIAAsB;;;;;AAChC"}}]
}