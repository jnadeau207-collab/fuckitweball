{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jesse/Documents/cartfax_complete_v2/lib/jurisdictions.ts"],"sourcesContent":["// lib/jurisdictions.ts\r\n\r\n// The Globe component requires TopoJSON data for all polygons to be drawn.\r\n// This data is pre-processed and embedded here to avoid file-loading issues\r\n// the user encountered while trying to process the original shapefile.\r\n// It includes Admin 1 regions for the four specified countries (USA, CAN, MEX, NLD)\r\n// and uses a lightweight version of the Natural Earth 1:50m Admin 1 dataset structure.\r\n\r\n// NOTE: The actual 'arcs' data is omitted here for brevity and is replaced with a\r\n// minimal structure to define the overall file format. The user should replace\r\n// `PLACEHOLDER_ARCS_DATA` and `PLACEHOLDER_OBJECTS_DATA` with the complete\r\n// contents of a World Admin 1 TopoJSON file, pre-filtered for US, CA, MX, and NL,\r\n// or use a pre-built one like those found on the topojson/world-atlas project.\r\n\r\n// To fully resolve the issue, you must replace the placeholder with the actual data.\r\n// A typical TopoJSON file is a few hundred kilobytes, which is fine to embed.\r\n\r\n/**\r\n * PLACEHOLDER_TOPOJSON_OBJECT: Represents the full TopoJSON structure.\r\n *\r\n * TO RESOLVE THIS FULLY:\r\n * 1. Go to a reliable source (like a d3-based TopoJSON atlas).\r\n * 2. Find the \"world admin 1\" TopoJSON file (e.g., ne_10m_admin_1_states_provinces).\r\n * 3. Use `topojson-filter` or `mapshaper` to filter the features to only keep\r\n * the following countries: USA, CAN, MEX, NLD.\r\n * 4. Paste the entire resulting JSON object below as the value of `PLACEHOLDER_TOPOJSON_OBJECT`.\r\n *\r\n * For now, this placeholder structure will prevent the globe from crashing (e.g., spinning forever)\r\n * by providing the necessary TopoJSON structure, but it will only render a single mock polygon.\r\n */\r\n\r\n// WARNING: This is a minimal structure that will allow the code to run without crashing,\r\n// but it is NOT the full, correct data. The user must replace the object with real data\r\n// as described in the comments above.\r\n\r\nexport const EMBEDDED_TOPOJSON_DATA: any = {\r\n  type: \"Topology\",\r\n  objects: {\r\n    // This object key must match the layer name in the final TopoJSON file.\r\n    // Assuming the layer name is 'states_provinces' based on the shapefile name.\r\n    states_provinces: {\r\n      type: \"GeometryCollection\",\r\n      geometries: [\r\n        // MOCK DATA: A single polygon to allow the globe to load and the code to run.\r\n        {\r\n          type: \"Polygon\",\r\n          properties: {\r\n            // These properties are essential for polygon identification/styling\r\n            name: \"Placeholder State\",\r\n            adm0_a3: \"USA\", // 3-letter country code\r\n            adm1_code: \"123\", // State/Province code\r\n            region: \"west\", // Custom region for styling\r\n          },\r\n          arcs: [[0, 1]], // References to arcs array below\r\n        },\r\n        // ADD ALL FILTERED TOPOGEOMETRY OBJECTS HERE\r\n      ],\r\n    },\r\n  },\r\n  arcs: [\r\n    // MOCK DATA: A single arc definition to make the TopoJSON format valid\r\n    [[10, 20], [30, 40], [50, 60]],\r\n  ],\r\n  bbox: [-180, -90, 180, 90],\r\n  transform: {\r\n    scale: [0.0001859604812301931, 0.00018315053738092923],\r\n    translate: [-179.99998819894458, -89.9999979737899],\r\n  },\r\n};\r\n\r\n// --- Jurisdiction Logic (kept from previous code) ---\r\n\r\nexport const JURISDICTION_MAP = {\r\n  USA: { name: \"United States\", region: \"west\" },\r\n  CAN: { name: \"Canada\", region: \"west\" },\r\n  MEX: { name: \"Mexico\", region: \"south\" },\r\n  NLD: { name: \"Netherlands\", region: \"europe\" },\r\n};\r\n\r\nexport type CountryCode = keyof typeof JURISDICTION_MAP;\r\nexport type Jurisdiction = { code: CountryCode; name: string; region: string };\r\n\r\nexport const JURISDICTIONS: Jurisdiction[] = Object.entries(JURISDICTION_MAP).map(\r\n  ([code, { name, region }]) => ({\r\n    code: code as CountryCode,\r\n    name,\r\n    region,\r\n  })\r\n);\r\n\r\nexport const DEFAULT_JURISDICTION: Jurisdiction = JURISDICTIONS[0]; // USA\r\n\r\nexport const getCountryName = (code: string) => JURISDICTION_MAP[code as CountryCode]?.name ?? \"Unknown\";\r\nexport const getCountryRegion = (poly: any) => poly.properties.adm0_a3 ? JURISDICTION_MAP[poly.properties.adm0_a3 as CountryCode]?.region : undefined;"],"names":[],"mappings":"AAAA,uBAAuB;AAEvB,2EAA2E;AAC3E,4EAA4E;AAC5E,uEAAuE;AACvE,oFAAoF;AACpF,uFAAuF;AAEvF,kFAAkF;AAClF,+EAA+E;AAC/E,2EAA2E;AAC3E,kFAAkF;AAClF,+EAA+E;AAE/E,qFAAqF;AACrF,8EAA8E;AAE9E;;;;;;;;;;;;CAYC,GAED,yFAAyF;AACzF,wFAAwF;AACxF,sCAAsC;;;;;;;;;;;;;;;AAE/B,MAAM,yBAA8B;IACzC,MAAM;IACN,SAAS;QACP,wEAAwE;QACxE,6EAA6E;QAC7E,kBAAkB;YAChB,MAAM;YACN,YAAY;gBACV,8EAA8E;gBAC9E;oBACE,MAAM;oBACN,YAAY;wBACV,oEAAoE;wBACpE,MAAM;wBACN,SAAS;wBACT,WAAW;wBACX,QAAQ;oBACV;oBACA,MAAM;wBAAC;4BAAC;4BAAG;yBAAE;qBAAC;gBAChB;aAED;QACH;IACF;IACA,MAAM;QACJ,uEAAuE;QACvE;YAAC;gBAAC;gBAAI;aAAG;YAAE;gBAAC;gBAAI;aAAG;YAAE;gBAAC;gBAAI;aAAG;SAAC;KAC/B;IACD,MAAM;QAAC,CAAC;QAAK,CAAC;QAAI;QAAK;KAAG;IAC1B,WAAW;QACT,OAAO;YAAC;YAAuB;SAAuB;QACtD,WAAW;YAAC,CAAC;YAAoB,CAAC;SAAiB;IACrD;AACF;AAIO,MAAM,mBAAmB;IAC9B,KAAK;QAAE,MAAM;QAAiB,QAAQ;IAAO;IAC7C,KAAK;QAAE,MAAM;QAAU,QAAQ;IAAO;IACtC,KAAK;QAAE,MAAM;QAAU,QAAQ;IAAQ;IACvC,KAAK;QAAE,MAAM;QAAe,QAAQ;IAAS;AAC/C;AAKO,MAAM,gBAAgC,OAAO,OAAO,CAAC,kBAAkB,GAAG,CAC/E,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,GAAK,CAAC;QAC7B,MAAM;QACN;QACA;IACF,CAAC;AAGI,MAAM,uBAAqC,aAAa,CAAC,EAAE,EAAE,MAAM;AAEnE,MAAM,iBAAiB,CAAC,OAAiB,gBAAgB,CAAC,KAAoB,EAAE,QAAQ;AACxF,MAAM,mBAAmB,CAAC,OAAc,KAAK,UAAU,CAAC,OAAO,GAAG,gBAAgB,CAAC,KAAK,UAAU,CAAC,OAAO,CAAgB,EAAE,SAAS"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jesse/Documents/cartfax_complete_v2/components/AdminStateExplorer.tsx"],"sourcesContent":["// components/AdminStateExplorer.tsx\r\nimport React, { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport dynamic from 'next/dynamic';\r\n\r\nimport {\r\n  JurisdictionId,\r\n  JURISDICTIONS,\r\n  jurisdictionById,\r\n} from '../lib/jurisdictions';\r\nimport type { RegionSelection } from './GlobeStates';\r\n\r\nconst GlobeStates = dynamic(() => import('./GlobeStates'), {\r\n  ssr: false,\r\n  loading: () => (\r\n    <div className=\"flex h-full w-full items-center justify-center text-xs text-slate-500\">\r\n      Warming up the atlas…\r\n    </div>\r\n  ),\r\n});\r\n\r\nconst AdminStateExplorer: React.FC = () => {\r\n  const [jurisdiction, setJurisdiction] =\r\n    useState<JurisdictionId>('unitedStates');\r\n\r\n  const [selectedRegion, setSelectedRegion] =\r\n    useState<RegionSelection | null>(null);\r\n\r\n  const [altitude, setAltitude] = useState<number | null>(null);\r\n\r\n  const spec = jurisdictionById[jurisdiction];\r\n\r\n  const apiNamespace = `/api/${spec.code}`;\r\n\r\n  const handleJurisdictionChange = (id: JurisdictionId) => {\r\n    setJurisdiction(id);\r\n    setSelectedRegion(null);\r\n  };\r\n\r\n  const title =\r\n    selectedRegion?.name ?? spec.label;\r\n\r\n  const crumbScope = `${spec.label} · Jurisdiction`;\r\n  const crumbLine =\r\n    'Drag, hover, and click the atlas to explore coverage in different legal regimes.';\r\n\r\n  const detailKind =\r\n    selectedRegion == null\r\n      ? `${spec.label} snapshot`\r\n      : `${selectedRegion.name} snapshot`;\r\n\r\n  return (\r\n    <main className=\"relative flex h-screen flex-col bg-black text-slate-50 overflow-hidden\">\r\n      {/* Top crumb + tabs */}\r\n      <header className=\"z-20 shrink-0 border-b border-slate-900 bg-gradient-to-b from-black via-black to-slate-950/60 px-6 pt-4 pb-3\">\r\n        <div className=\"mx-auto flex max-w-6xl flex-col gap-2\">\r\n          <div className=\"flex flex-wrap items-baseline gap-3\">\r\n            <p className=\"text-[0.7rem] font-semibold uppercase tracking-[0.22em] text-sky-400\">\r\n              {crumbScope}\r\n            </p>\r\n            <p className=\"text-[0.75rem] text-slate-400\">\r\n              {crumbLine}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex flex-wrap items-center justify-between gap-3\">\r\n            <div className=\"inline-flex rounded-full border border-slate-800 bg-black px-1 py-1 shadow-sm shadow-slate-900\">\r\n              {JURISDICTIONS.map((j) => (\r\n                <button\r\n                  key={j.id}\r\n                  type=\"button\"\r\n                  onClick={() =>\r\n                    handleJurisdictionChange(j.id)\r\n                  }\r\n                  className={\r\n                    'rounded-full px-4 py-1.5 text-[11px] transition ' +\r\n                    (jurisdiction === j.id\r\n                      ? 'bg-sky-500 text-white shadow-sm shadow-sky-500/40'\r\n                      : 'text-slate-400 hover:text-slate-100')\r\n                  }\r\n                >\r\n                  {j.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2 text-[11px] text-slate-500\">\r\n              <span className=\"inline-flex h-2 w-2 rounded-full bg-sky-400 shadow-[0_0_0_4px_rgba(56,189,248,0.40)]\" />\r\n              <span>\r\n                Drag to spin · Hover to “lift” · Scroll to zoom · Click to drill into a region\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Globe + overlay card */}\r\n      <section className=\"relative flex flex-1 overflow-hidden\">\r\n        {/* Globe fills the whole left / center area */}\r\n        <div className=\"relative flex flex-1 items-center justify-center\">\r\n          <div className=\"relative h-full w-full\">\r\n            {/* The globe canvas */}\r\n            <GlobeStates\r\n              jurisdiction={jurisdiction}\r\n              onRegionSelect={(region) =>\r\n                setSelectedRegion(region)\r\n              }\r\n              onViewChange={(alt) =>\r\n                setAltitude(alt)\r\n              }\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Floating card anchored near the right edge */}\r\n        <aside className=\"pointer-events-none absolute inset-y-6 right-6 z-30 flex max-w-sm items-start justify-end\">\r\n          <div className=\"pointer-events-auto w-full max-w-sm rounded-3xl border border-slate-700 bg-black/85 px-4 pb-3 pt-3 text-sm shadow-[0_22px_60px_rgba(0,0,0,0.85)] backdrop-blur\">\r\n            <header className=\"mb-3 border-b border-slate-800 pb-2\">\r\n              <p className=\"text-[0.68rem] font-semibold uppercase tracking-[0.22em] text-sky-400\">\r\n                {spec.label.toUpperCase()} ·{' '}\r\n                {detailKind.toUpperCase()}\r\n              </p>\r\n              <h2 className=\"text-base font-semibold text-slate-50\">\r\n                {title}\r\n              </h2>\r\n              <p className=\"mt-1 text-[0.78rem] text-slate-400\">\r\n                {spec.description}\r\n              </p>\r\n            </header>\r\n\r\n            <div className=\"space-y-3 text-[0.78rem] text-slate-300\">\r\n              <p>\r\n                You’re viewing{' '}\r\n                <span className=\"font-semibold\">\r\n                  {spec.label}\r\n                </span>{' '}\r\n                as a CartFax operator. The globe state is the\r\n                source of truth for which jurisdiction and\r\n                subregion are active. Backend calls for this\r\n                view should route through:\r\n              </p>\r\n              <p className=\"rounded-md bg-slate-900 px-3 py-1.5 font-mono text-[0.72rem] text-sky-300\">\r\n                {apiNamespace}\r\n                {selectedRegion\r\n                  ? `/regions/${selectedRegion.id}`\r\n                  : ''}\r\n              </p>\r\n\r\n              <p className=\"text-[0.72rem] text-slate-400\">\r\n                In production, use this namespace to scope:\r\n                COA parsing, batch ingestion, recalls,\r\n                dashboards, and permissions. The admin app can\r\n                still offer a deep “table view”, but the globe\r\n                remains the universal entry point.\r\n              </p>\r\n            </div>\r\n\r\n            <footer className=\"mt-3 flex items-center justify-between gap-3 border-t border-slate-800 pt-2\">\r\n              <Link\r\n                href={`/admin?jurisdiction=${spec.code}${\r\n                  selectedRegion\r\n                    ? `&region=${encodeURIComponent(\r\n                        selectedRegion.id,\r\n                      )}`\r\n                    : ''\r\n                }`}\r\n                className=\"inline-flex items-center justify-center rounded-full bg-sky-500 px-3 py-1.5 text-[0.78rem] font-medium text-white shadow-sm shadow-sky-500/40 transition hover:bg-sky-600\"\r\n              >\r\n                Open admin data tools\r\n              </Link>\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setSelectedRegion(null)}\r\n                className=\"text-[11px] text-slate-500 hover:text-slate-300\"\r\n              >\r\n                Reset to region\r\n              </button>\r\n            </footer>\r\n          </div>\r\n        </aside>\r\n      </section>\r\n\r\n      {/* Tiny footer – kept inside 100vh */}\r\n      <footer className=\"z-10 shrink-0 border-t border-slate-900 bg-black px-6 py-2 text-[10px] text-slate-500\">\r\n        <div className=\"mx-auto flex max-w-6xl items-center justify-between\">\r\n          <span>© {new Date().getFullYear()} CartFax.</span>\r\n          <span>\r\n            Independent data on legal cannabis retailers &\r\n            batches.\r\n          </span>\r\n        </div>\r\n      </footer>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default AdminStateExplorer;\r\n"],"names":[],"mappings":"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"}}]
}