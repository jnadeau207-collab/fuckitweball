{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jesse/Documents/cartfax_complete_v2/components/AdminStateExplorer.tsx"],"sourcesContent":["// components/AdminStateExplorer.tsx\r\nimport React, { useState } from 'react';\r\nimport dynamic from 'next/dynamic';\r\nimport Link from 'next/link';\r\nimport type { RegionId } from './GlobeStates';\r\n\r\nconst GlobeStates = dynamic(() => import('./GlobeStates'), {\r\n  ssr: false,\r\n  loading: () => (\r\n    <div className=\"flex h-full w-full items-center justify-center text-xs text-slate-500\">\r\n      Loading 3D atlas…\r\n    </div>\r\n  ),\r\n});\r\n\r\nconst regionLabels: { id: RegionId; label: string }[] = [\r\n  { id: 'unitedStates', label: 'United States' },\r\n  { id: 'canada', label: 'Canada' },\r\n  { id: 'mexico', label: 'Mexico' },\r\n  { id: 'netherlands', label: 'Netherlands' },\r\n];\r\n\r\nconst AdminStateExplorer: React.FC = () => {\r\n  const [region, setRegion] = useState<RegionId>('unitedStates');\r\n  const [selected, setSelected] = useState<{\r\n    id: string | number | null;\r\n    name: string | null;\r\n  }>({\r\n    id: null,\r\n    name: null,\r\n  });\r\n\r\n  const [viewAltitude, setViewAltitude] = useState<number | null>(null);\r\n\r\n  const handleRegionChange = (next: RegionId) => {\r\n    setRegion(next);\r\n    // when switching countries, treat selection as \"whole jurisdiction\"\r\n    setSelected({ id: null, name: null });\r\n  };\r\n\r\n  const handleStateSelectFromGlobe = (\r\n    id: string | number | null,\r\n    name: string,\r\n  ) => {\r\n    setSelected({\r\n      id,\r\n      name: name || null,\r\n    });\r\n  };\r\n\r\n  const regionLabel =\r\n    regionLabels.find(r => r.id === region)?.label ?? 'Region';\r\n\r\n  const selectionTitle = selected.name ?? regionLabel;\r\n\r\n  const apiNamespace =\r\n    region === 'unitedStates'\r\n      ? 'us'\r\n      : region === 'canada'\r\n      ? 'ca'\r\n      : region === 'mexico'\r\n      ? 'mx'\r\n      : 'nl';\r\n\r\n  return (\r\n    <main className=\"flex min-h-screen flex-col bg-black text-slate-50 overflow-hidden\">\r\n      {/* Header / Tabs */}\r\n      <header className=\"mx-auto w-full max-w-6xl px-4 pt-4 pb-3\">\r\n        <p className=\"text-[0.7rem] font-semibold uppercase tracking-[0.22em] text-sky-400\">\r\n          {regionLabel.toUpperCase()} · JURISDICTION\r\n        </p>\r\n\r\n        <div className=\"mt-2 flex flex-wrap items-center justify-between gap-3\">\r\n          <div className=\"inline-flex rounded-full border border-slate-700 bg-black px-1 py-1 shadow-sm shadow-slate-900\">\r\n            {regionLabels.map(r => (\r\n              <button\r\n                key={r.id}\r\n                type=\"button\"\r\n                onClick={() => handleRegionChange(r.id)}\r\n                className={\r\n                  'rounded-full px-4 py-1.5 text-[11px] transition ' +\r\n                  (region === r.id\r\n                    ? 'bg-sky-500 text-white shadow-sm shadow-sky-500/40'\r\n                    : 'text-slate-400 hover:text-slate-100')\r\n                }\r\n              >\r\n                {r.label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          <p className=\"text-[0.75rem] text-slate-400\">\r\n            Drag to spin · Hover to “lift” · Scroll to zoom · Click to drill\r\n            into a region\r\n          </p>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Globe + overlays */}\r\n      <div className=\"relative flex-1\">\r\n        {/* Globe container – full-bleed, guaranteed height */}\r\n        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n          <div className=\"aspect-square w-full max-w-[900px]\">\r\n            <GlobeStates\r\n              region={region}\r\n              onRegionChange={handleRegionChange}\r\n              onStateSelect={handleStateSelectFromGlobe}\r\n              onViewChange={alt => setViewAltitude(alt)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Jurisdiction card overlay */}\r\n        <div className=\"pointer-events-none absolute inset-0 flex items-start justify-end px-6 pt-20\">\r\n          <section className=\"pointer-events-auto w-full max-w-sm rounded-3xl border border-slate-700 bg-black/85 shadow-[0_22px_60px_rgba(0,0,0,0.7)] backdrop-blur\">\r\n            <header className=\"border-b border-slate-800 px-4 pb-2 pt-3\">\r\n              <p className=\"mb-1 text-[0.68rem] font-semibold uppercase tracking-[0.22em] text-sky-400\">\r\n                {regionLabel.toUpperCase()} · JURISDICTION SNAPSHOT\r\n              </p>\r\n              <h2 className=\"text-lg font-semibold text-slate-50\">\r\n                {selectionTitle}\r\n              </h2>\r\n              <p className=\"mt-1 text-[0.78rem] text-slate-400\">\r\n                Illustrative coverage metrics while we connect live COA feeds,\r\n                lab integrations, and recall data.\r\n              </p>\r\n            </header>\r\n\r\n            <div className=\"px-4 py-3 text-[0.78rem] text-slate-300\">\r\n              <p className=\"mb-2\">\r\n                You’re viewing{' '}\r\n                <span className=\"font-semibold\">{regionLabel}</span> as an\r\n                operator. Data and tools are scoped to this jurisdiction and\r\n                selection.\r\n              </p>\r\n              <ul className=\"space-y-1 text-[0.75rem] text-slate-400\">\r\n                <li>• PII visibility: allowed within jurisdiction.</li>\r\n                <li>\r\n                  • Government dashboards: restricted by role and licence.\r\n                </li>\r\n                <li>• Operator dashboards: allowed where licensed.</li>\r\n                <li>• Aggregated analytics: allowed across regions.</li>\r\n              </ul>\r\n\r\n              <p className=\"mt-3 text-[0.7rem] text-slate-500\">\r\n                Backend note: reads and writes for this view go through the{' '}\r\n                <code className=\"rounded bg-slate-900 px-1 py-0.5 text-[0.7rem]\">\r\n                  /api/{apiNamespace}\r\n                </code>{' '}\r\n                namespace. The globe is the source of truth for which namespace\r\n                is active.\r\n              </p>\r\n            </div>\r\n\r\n            <footer className=\"flex items-center justify-between gap-3 border-t border-slate-800 px-4 py-2.5\">\r\n              <Link\r\n                href=\"/admin\"\r\n                className=\"inline-flex items-center justify-center rounded-full bg-sky-500 px-3 py-1.5 text-[0.78rem] font-medium text-white shadow-sm shadow-sky-500/40 transition hover:bg-sky-600\"\r\n              >\r\n                Open admin data tools\r\n              </Link>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setSelected({ id: null, name: null })}\r\n                className=\"text-[11px] text-slate-500 hover:text-slate-300\"\r\n              >\r\n                Reset to region\r\n              </button>\r\n            </footer>\r\n          </section>\r\n        </div>\r\n\r\n        {/* Footer text, overlaid (doesn’t create scroll) */}\r\n        <div className=\"pointer-events-none absolute inset-x-0 bottom-2 flex justify-center\">\r\n          <p className=\"text-[0.68rem] text-slate-500\">\r\n            Independent data on legal cannabis retailers &amp; batches.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default AdminStateExplorer;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jesse/Documents/cartfax_complete_v2/pages/index.tsx"],"sourcesContent":["// pages/index.tsx\nimport { useSession } from 'next-auth/react';\nimport AdminStateExplorer from '../components/AdminStateExplorer';\n\nexport default function Home() {\n  const { data: session } = useSession();\n  // Same atlas, but guests are allowed and treated as \"guest\" role\n  return <AdminStateExplorer session={session ?? null} />;\n}\n"],"names":[],"mappings":"AAAA,kBAAkB;;;;;;AAClB;AACA;;;;AAEe,SAAS;IACtB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,iJAAU;IACpC,iEAAiE;IACjE,qBAAO,qKAAC,qIAAkB;QAAC,SAAS,WAAW;;;;;;AACjD"}}]
}