import dynamic from 'next/dynamic';

// --- CRITICAL FIX: Dynamic Import with ssr: false ---
// This tells Next.js to only load the Map component in the browser environment,
// bypassing the server's inability to handle Leaflet's dependencies (like 'window').
const DynamicMap = dynamic(
  () => import('../../../components/Map'), // Adjusted relative path
  {
    ssr: false, 
    loading: () => (
      <div className="flex justify-center items-center h-96 w-full bg-gray-50 rounded-lg">
        <p className="text-lg text-gray-500 animate-pulse">
          ğŸ›°ï¸ Loading Interactive Map...
        </p>
      </div>
    ), 
  }
);

// We will assume you have a standard layout for admin pages, 
// but since you didn't provide AdminLayout, we'll just use the main content.

export default function AdminStatesPage() {
  return (
    <div className="min-h-screen p-6 bg-gray-50">
      <div className="max-w-7xl mx-auto">
        <h1 className="text-3xl font-bold text-gray-900 mb-2">
          Administrative State Overview
        </h1>
        <p className="text-gray-500 mb-8">
          Interactive map for visualizing and managing state-level data.
        </p>
        
        {/* Render the dynamically imported map */}
        <DynamicMap />

        <div className="mt-8 bg-white p-6 rounded-lg shadow">
            <h2 className="text-xl font-semibold mb-4">State Data Table (Placeholder)</h2>
            <p className="text-gray-600">
                Data tables or other administrative controls for the states will appear here.
                This area confirms the rest of your page is loading correctly below the map.
            </p>
        </div>
      </div>
    </div>
  );
}